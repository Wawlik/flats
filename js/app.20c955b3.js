(function(t){function e(e){for(var i,s,o=e[0],u=e[1],l=e[2],c=0,f=[];c<o.length;c++)s=o[c],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);d&&d(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,s=1;s<a.length;s++){var u=a[s];0!==r[u]&&(i=!1)}i&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},r={app:0},n=[];function s(t){return o.p+"js/"+({about:"about"}[t]||t)+"."+{about:"17975702"}[t]+".js"}function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var e=[],a=r[t];if(0!==a)if(a)e.push(a[2]);else{var i=new Promise((function(e,i){a=r[t]=[e,i]}));e.push(a[2]=i);var n,u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=s(t);var l=new Error;n=function(e){u.onerror=u.onload=null,clearTimeout(c);var a=r[t];if(0!==a){if(a){var i=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+n+")",l.name="ChunkLoadError",l.type=i,l.request=n,a[1](l)}r[t]=void 0}};var c=setTimeout((function(){n({type:"timeout",target:u})}),12e4);u.onerror=u.onload=n,document.head.appendChild(u)}return Promise.all(e)},o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("85ec"),r=a.n(i);r.a},"19de":function(t,e,a){t.exports=a.p+"img/agent.453530c0.png"},"3da2":function(t,e,a){"use strict";var i=a("f24f"),r=a.n(i);r.a},4318:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flat"},[i("div",{staticClass:"uk-card uk-card-default "},[i("div",{staticClass:"uk-card-header"},[i("div",{staticClass:"uk-grid-small uk-flex-middle",attrs:{"uk-grid":""}},[i("div",{staticClass:"uk-width-auto uk-margin-small-right"},[t.isFlatInFavs(t.data.id)?i("svg",{staticClass:"favs-rm-flat-icon",attrs:{"uk-tooltip":"Убрать из избранного",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"24",height:"24",viewBox:"0 0 24 24"},on:{click:function(e){return t.favsRmFlat(t.data.id)}}},[i("path",{attrs:{d:"M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"}})]):i("svg",{staticClass:"favs-add-flat-icon",attrs:{"uk-tooltip":"Добавить в избранное",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"24",height:"24",viewBox:"0 0 24 24"},on:{click:function(e){return t.favsAddFlat()}}},[i("path",{attrs:{d:"M12.1,18.55L12,18.65L11.89,18.55C7.14,14.24 4,11.39 4,8.5C4,6.5 5.5,5 7.5,5C9.04,5 10.54,6 11.07,7.36H12.93C13.46,6 14.96,5 16.5,5C18.5,5 20,6.5 20,8.5C20,11.39 16.86,14.24 12.1,18.55M16.5,3C14.76,3 13.09,3.81 12,5.08C10.91,3.81 9.24,3 7.5,3C4.42,3 2,5.41 2,8.5C2,12.27 5.4,15.36 10.55,20.03L12,21.35L13.45,20.03C18.6,15.36 22,12.27 22,8.5C22,5.41 19.58,3 16.5,3Z"}})])]),i("div",{staticClass:"uk-width-expand"},[i("h3",{staticClass:"uk-card-title uk-margin-remove uk-text-truncate"},[t._v(t._s(t.data.attributes.title))]),i("p",{staticClass:"uk-text-meta uk-margin-remove-top uk-text-truncate"},[i("span",[t._v("Комнат: "+t._s(t.data.attributes.rooms))]),i("br"),i("span",[t._v("Площадь: "+t._s(t.data.attributes.area)+" "+t._s(t.data.attributes.unit))])])])])]),i("div",{staticClass:"uk-card-body flat-body"},[i("p",{staticClass:"flat-body--text"},[t._v(t._s(t.getFlatAdr(t.data.attributes)))])]),i("div",{staticClass:"uk-card-footer"},[i("div",{staticClass:"uk-grid-small uk-flex-middle",attrs:{"uk-grid":""}},[i("div",{staticClass:"uk-width-auto"},[t.isAgent(t.data.relationships)?i("img",{staticClass:"uk-border-circle",attrs:{"uk-tooltip":"Агент",width:"40",height:"40",src:a("19de")}}):i("img",{staticClass:"uk-border-circle",attrs:{"uk-tooltip":"Владелец",width:"40",height:"40",src:a("c06a")}})]),i("div",{staticClass:"uk-width-expand uk-flex"},[i("p",{staticClass:"uk-card-title uk-margin-remove uk-flex flat-rls-name uk-flex-middle"},[i("span",{staticClass:"uk-flex-middle"},[t._v(t._s(t.getRlsName(t.data.relationships)))])])])])])])])},r=[],n=(a("c740"),a("a434"),a("62ee")),s={name:"flat",mixins:[n["a"]],props:{data:Object,index:String},data:function(){return{lskey:"flats"}},methods:{getRlsName:function(t){var e,a,i=null===(e=t.attributes)||void 0===e?void 0:e.first_name,r=null===(a=t.attributes)||void 0===a?void 0:a.last_name;return r||i?r+" "+i:"Неизвестно"},isAgent:function(t){return"agent"===(null===t||void 0===t?void 0:t.type)},getFlatAdr:function(t){var e="",a=null===t||void 0===t?void 0:t.address;return e+=a.city?a.city:"",e+=(e?", ":"")+(a.street?"ул."+a.street:""),e+=(e?", ":"")+(a.house?"дом "+a.house:""),e+=(e?", ":"")+(a.room?"кв. "+a.room:""),e},favsAddFlat:function(){var t=null,e=this.$props.data;try{var a=localStorage.getItem(this.lskey);if(a){t=JSON.parse(a),t.splice(0,0,e);var i=JSON.stringify(t);localStorage.setItem(this.lskey,i)}else t=JSON.stringify([e]),localStorage.setItem(this.lskey,t);this.notifyOk("Изменения успешно сохранены"),this.$forceUpdate()}catch(r){console.error(r),this.notifyErr("Что-то пошло не так. Попробуйте перезагрузить страницу")}},favsRmFlat:function(t){var e=null;try{var a=localStorage.getItem(this.lskey);if(a){e=JSON.parse(a);var i=e.findIndex((function(e){return""+e.id===""+t}));if(~i){e.splice(i,1);var r=JSON.stringify(e);localStorage.setItem(this.lskey,r),this.$forceUpdate()}else this.notifyErr("Что-то пошло не так. Попробуйте перезагрузить страницу")}this.notifyOk("Изменения успешно сохранены"),this.$forceUpdate()}catch(n){console.error(n),this.notifyErr("Что-то пошло не так. Попробуйте перезагрузить страницу")}},isFlatInFavs:function(t){try{var e=localStorage.getItem(this.lskey);if(e){var a=JSON.parse(e),i=a.findIndex((function(e){return""+e.id===""+t}));return~i}}catch(r){console.error(r),this.notifyErr("Что-то пошло не так. Попробуйте перезагрузить страницу")}}}},o=s,u=(a("3da2"),a("2877")),l=Object(u["a"])(o,i,r,!1,null,null,null);e["a"]=l.exports},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"nav"}},[a("router-link",{attrs:{to:"/"}},[t._v("Предложения")]),t._v(" | "),a("router-link",{attrs:{to:"/favs"}},[t._v("Избранное")])],1),a("router-view")],1)},n=[],s=(a("034f"),a("2877")),o={},u=Object(s["a"])(o,r,n,!1,null,null,null),l=u.exports,c=(a("d3b7"),a("8c4f")),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[t.fflats&&t.fflats.length?a("div",{staticClass:"uk-grid uk-grid-small uk-child-width-1-4@l \n\t\tuk-child-width-1-3@m uk-child-width-1-2@s uk-child-width-1-1@xs\tuk-padding",attrs:{"uk-grid":""}},t._l(t.fflats,(function(t,e){return a("flat",{key:"flat-"+t.id,attrs:{data:t,index:""+e}})})),1):a("div",{staticClass:"uk-align-center"},[t._m(0),t._m(1)])])},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orbit-spinner uk-margin-auto"},[a("div",{staticClass:"orbit"}),a("div",{staticClass:"orbit"}),a("div",{staticClass:"orbit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uk-margin-small-top"},[a("p",{staticClass:"uk-text-meta uk-margin-remove-top uk-text-truncate"},[t._v(" Ищем подходящие для вас варианты...")])])}],p=(a("96cf"),a("1da1")),m=a("4318"),v=a("edb2"),h={name:"Home",components:{flat:m["a"]},data:function(){return{fflats:null}},methods:{getFlats:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new Promise((function(t){setTimeout((function(){return t(v.response)}),1e3)})),e.next=3,a;case 3:t.fflats=e.sent;case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getFlats()}},g=h,k=(a("cccb"),Object(s["a"])(g,d,f,!1,null,null,null)),w=k.exports;i["a"].use(c["a"]);var y=[{path:"/",name:"Home",component:w},{path:"/favs",name:"favs",component:function(){return a.e("about").then(a.bind(null,"b8d7"))}}],b=new c["a"]({mode:"history",base:"/",routes:y}),C=b;i["a"].config.productionTip=!1,new i["a"]({router:C,render:function(t){return t(l)}}).$mount("#app")},"5ced":function(t,e,a){},"62ee":function(t,e,a){"use strict";e["a"]={methods:{notifyOk:function(t,e){t||(t="Операция успешно выполнена"),window&&window.UIkit&&window.UIkit.notification({message:t,status:"success",timeout:e||3e3,pos:"top-right"})},notifyWarn:function(t,e){t||(t="Что-то пошло не так"),window&&window.UIkit&&window.UIkit.notification({message:t,status:"warning",timeout:e||3e3,pos:"top-right"})},notifyErr:function(t,e){t||(t="Что-то пошло не так, попытайтесь обновить страницу"),window&&window.UIkit&&window.UIkit.notification({message:t,status:"danger",timeout:e||5e3,pos:"top-right"})}}}},"85ec":function(t,e,a){},c06a:function(t,e,a){t.exports=a.p+"img/owner.b4920c5b.jpg"},cccb:function(t,e,a){"use strict";var i=a("5ced"),r=a.n(i);r.a},edb2:function(t){t.exports=JSON.parse('{"response":[{"type":"flat","id":1,"attributes":{"title":"3-х комнатная на Минской","rooms":3,"address":{"city":"Tyumen","street":"Минская","house":"3a","room":"123"},"area":134,"unit":"квм"},"relationships":{"type":"owner","id":2,"attributes":{"first_name":"Василий","last_name":"Дроздов","middle_name":"Михайлович"}}},{"type":"flat","id":2,"attributes":{"title":"1 комнатная на Барабаинской","rooms":2,"address":{"city":"Tyumen","street":"Барабинская","house":"12","room":"45"},"area":34,"unit":"квм"},"relationships":{"type":"agent","id":10,"attributes":{"first_name":"Михаил","last_name":"Иванов","middle_name":"Демидович"}}},{"type":"flat","id":3,"attributes":{"title":"Квартира Ленина","rooms":4,"address":{"city":"Tyumen","street":"Ленина","house":"134","room":"24"},"area":134,"unit":"квм"},"relationships":{"type":"agent","id":44,"attributes":{"first_name":"Степан","last_name":"Карачаев","middle_name":"Иванович"}}}]}')},f24f:function(t,e,a){}});
//# sourceMappingURL=app.20c955b3.js.map